# /etc/apache2/httpd.conf

# Server Root
ServerRoot "/var/www"

# Ports
Listen {{ apache_port | default(80) }}

# Modules
LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule dir_module modules/mod_dir.so
LoadModule mime_module modules/mod_mime.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule unixd_module modules/mod_unixd.so
LoadModule status_module modules/mod_status.so
LoadModule rewrite_module modules/mod_rewrite.so

# User/Group
User apache
Group apache

# Server Admin
ServerAdmin {{ apache_admin_email | default('root@localhost') }}
ServerName {{ inventory_hostname }}

# Document Root
DocumentRoot "{{ apache_doc_root | default('/var/www/localhost/htdocs') }}"
<Directory "{{ apache_doc_root | default('/var/www/localhost/htdocs') }}">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

# Logging
ErrorLog /var/log/apache2/error.log
LogLevel warn

<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    CustomLog /var/log/apache2/access.log combined
</IfModule>

# Mime Types
<IfModule mime_module>
    TypesConfig /etc/apache2/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
</IfModule>
