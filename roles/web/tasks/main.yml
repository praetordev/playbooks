---
- name: Install Apache and PHP
  ansible.builtin.package:
    name:
      - apache2
      - php-apache2
      - php
      - php-mysqli
    state: present

- name: Suppress Apache ServerName warning
  ansible.builtin.lineinfile:
    path: /etc/httpd/conf/httpd.conf
    line: "ServerName localhost"
    state: present

- name: Start Apache
  ansible.builtin.command: httpd -k start
  ignore_errors: yes # Ignore if already running

# FIX: Replaced 'include' with 'include_tasks'
- name: Configure Virtual Hosts
  ansible.builtin.include_tasks: vhosts.yml
